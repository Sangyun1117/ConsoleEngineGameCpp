# 콘솔엔진 테라리아
> Window 콘솔창으로 즐길 수 있는 테라리아와 같은 2D 횡스크롤 샌드박스 게임입니다.
> 원티드 포텐업 게임개발트랙 과정 중 진행된 프로젝트로 개발기간은 약 1주일 입니다.

---

## 🖼️ 데모 / 스크린샷
### ⛏️ 건축<br>
![Image](https://github.com/user-attachments/assets/bba67935-1797-445e-9dac-11c442a59111)
![Image](https://github.com/user-attachments/assets/481b02e6-2021-482f-9bad-e2d71686b9a6)<br>
### ⚔️ 전투<br>
![Image](https://github.com/user-attachments/assets/d2ce1554-e098-4c45-9e3d-970feab75a50)

---

## 📜 소개
이 프로젝트는 샌드박스 게임 Terraria에서 영감을 받아 제작한 **콘솔 기반 샌드박스 게임**입니다.  
Window콘솔창으로 전투, 탐험, 건축 등을 즐길 수 있습니다.

---

## ⚙️ 개발 환경

- 개발 도구: Visual Studio 2022  
- 프로그래밍 언어: C++  
- 운영체제: Windows 11

---

## 🎮 주요 기능
- 블록 설치 및 제거
- 인벤토리
- 몬스터와 전투

---

## 🛠️ 설치 방법
OS: Windows 콘솔/터미널 환경 필요<br><br>
아래 링크에서 설치 후 ClientGame 폴더의 ClientGame.exe 관리자 권한으로 실행<br>
https://github.com/Sangyun1117/Terraria-ConsoleEngine/releases/download/v1.0.0/ConsoleTerraria.zip <br>


## 📌 게임 방법
- W/D로 이동

- Space로 점프

- 마우스 왼쪽키로 블록 설치/제거, 공격

- 숫자 0~9로 아이템 변경

## 😒 개발 과정 & 어려웠던 점

### 1. 플레이어 중심 화면 이동

❓ 맵이 넓기 때문에 플레이어 중심으로 맵의 일부분만 보여줘야 했습니다.

💡 해결 방법
1. 맵과 플레이어의 좌표를 txt 파일에 저장
2. txt 파일을 불러온 후 월드 좌표로 변경 (txt파일에 적힌 문자를 Switch 문으로 실제 오브젝트 크기로 변환)
3. 카메라 LeftTop 좌표 구하기 (플레이어 좌표 - 콘솔창 크기 / 2)
4. 구한 카메라 좌표부터 콘솔창 크기만큼 렌더링
5. 플레이어 이동 시 카메라 좌표도 같이 변경

### 2. 샌드박스 게임 특성상 넓은 맵과 다수의 오브젝트 존재 → 최적화 필요

❓ 객체 생성 시 3개의 파일(이미지, 배경색, 전경색)을 가져오기 때문에 동일한 파일 로드가 빈번히 일어났습니다.

💡 해결 방법
- 이미지 관리자 객체 생성
- 게임 실행 시 이미지 관리자가 Assets 폴더의 모든 파일을 미리 로드
- 객체 생성 시 참조 방식으로 파일 사용하여 중복 로드 방지
- 사용하지 않을 수도 있는 이미지를 불러오는 단점이 있으나, 프로젝트 규모가 작아 그런 케이스가 적음 + 구조가 단순함

❓ 정적 객체와 동적 객체를 한 큐에서 관리하여 의미 없는 대기가 빈번히 발생했습니다. (정적 객체가 아무 행동이 없어도 매 프레임 Tick() 호출, 몬스터 공격 판정 시 정적 객체인 블록도 포함됨)

💡 해결 방법
- 정적 객체는 2차원 벡터에 저장, 동적 객체는 큐에 별도로 저장
- 정적 객체는 벡터에 저장해 마우스 클릭등의 이벤트 시 탐색을 빠르게 함. Tick() 호출 없이 필요 시 동적 객체에서 접근하여 행동 처리(블록 생성/삭제 등)
- 동적 객체는 큐에 저장되어 우선순위에 따라 sort 후 Render 처리


## 🚀 향후 계획
- 세이브 기능

- 무한맵 기능

- 아이템 제작

- 더 다양한 아이템과 몬스터 추가

- 몬스터 이동 알고리즘 변경 (A* 알고리즘 등)

- 미니맵

- 맵 에디터 기능

## 📄 프로젝트 문서 (Notion)
[🔗 노션 페이지](https://www.notion.so/C-2423bd2b36e2808c8fafceb6bb81a479)
